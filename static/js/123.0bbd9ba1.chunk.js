"use strict";(self.webpackChunkbackstage_react_ts=self.webpackChunkbackstage_react_ts||[]).push([[123],{9990:function(e,t,n){n.d(t,{CM:function(){return j},Dm:function(){return c},FX:function(){return q},Hv:function(){return o},Jk:function(){return w},Km:function(){return x},OM:function(){return s},P$:function(){return T},QS:function(){return N},UP:function(){return f},WS:function(){return Z},WU:function(){return d},XV:function(){return S},Xk:function(){return v},Zk:function(){return h},Zm:function(){return _},bN:function(){return y},cN:function(){return a},dP:function(){return k},h3:function(){return u},h8:function(){return l},jH:function(){return r},rs:function(){return g},s9:function(){return m},vz:function(){return p}});var i=n(544),s=function(e){return i.Z.request({url:"/examEdit/getExam",method:"POST",data:e})},a=function(e){return i.Z.request({url:"/examEdit/insertQuestion",method:"POST",data:e})},o=function(e){return i.Z.request({url:"/examEdit/addNewProject",method:"POST",data:e})},r=function(e){return i.Z.request({url:"/examEdit/copyProject",method:"POST",data:e})},c=function(e){return i.Z.request({url:"/examEdit/getExamList",method:"POST",data:e})},l=function(e){return i.Z.request({url:"/examEdit/getQuesStore",method:"POST",data:e})},d=function(e){return i.Z.request({url:"/examEdit/quesEditItem",method:"POST",data:e})},u=function(e){return i.Z.request({url:"/examEdit/changeQuestionType",method:"POST",data:e})},p=function(e){return i.Z.request({url:"/examEdit/changeQuestionScore",method:"POST",data:e})},m=function(e){return i.Z.request({url:"/examEdit/changeQuestionAnswer",method:"POST",data:e})},x=function(e){return i.Z.request({url:"/examEdit/deleteQuestion",method:"POST",data:e})},h=function(e){return i.Z.request({url:"/examEdit/getIssueStatus",method:"POST",data:e})},f=function(e){return i.Z.request({url:"/examEdit/issueExam",method:"POST",data:e})},v=function(e){return i.Z.request({url:"/examEdit/addNewType",method:"POST",data:e})},y=function(e){return i.Z.request({url:"/examEdit/addQuesToStore",method:"POST",data:e})},g=function(e){return i.Z.request({url:"/examEdit/cancelCollect",method:"POST",data:e})},j=function(e){return i.Z.request({url:"/examEdit/removeImage",method:"POST",data:e})},_=function(e){return i.Z.request({url:"/examEdit/addOption",method:"POST",data:e})},w=function(e){return i.Z.request({url:"/examEdit/removeOption",method:"POST",data:e})},N=function(e){return i.Z.request({url:"/examEdit/editExamMSG",method:"POST",data:e})},Z=function(e){return i.Z.request({url:"/examEdit/stopIssue",method:"POST",data:e})},S=function(e){return i.Z.request({url:"/examEdit/copyFromStore",method:"POST",data:e})},k=function(e){return i.Z.request({url:"/examEdit/copyFromTemp",method:"POST",data:e})},q=function(e){return i.Z.request({url:"/examEdit/updateStoreList",method:"POST",data:e})},T=function(e){return i.Z.request({url:"/examEdit/removeExam",method:"POST",data:e})}},9387:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(6805),s={demo:{demoTest:function(e){return{type:i.VZ,payload:e}}},examEdit:{setOriginList:function(e){return{type:i.zE,payload:e}},setStepStatus:function(e){return{type:i.Yn,payload:e}},setQuesFocus:function(e){return{type:i.TL,payload:e}},setQuesType:function(e){return{type:i.ur,payload:e}},setExamId:function(e){return{type:i.Sh,payload:e}},updateQuesList:function(e){return{type:i.Mc,payload:e}},setFocusMsg:function(e){return{type:i.O5,payload:e}},changeShowSerial:function(e){return{type:i.pG,payload:e}},setHiddenHolder:function(e){return{type:i.ZQ,payload:e}},setLoginId:function(e){return{type:i.mf,payload:e}},setTypeList:function(e){return{type:i.lA,payload:e}},setQuestionStore:function(e){return{type:i.dG,payload:e}},setExamStatus:function(e){return{type:i.hf,payload:e}},scrollToBottom:function(){return document.documentElement.scrollTo({behavior:"smooth",top:document.documentElement.scrollHeight}),{type:"",payload:{}}},scrollToActiveQues:function(e){var t,n=null===(t=document.querySelector(".normal-question-list .question-item:nth-child(".concat(e+1,")")))||void 0===t?void 0:t.getBoundingClientRect().top;return document.documentElement.scrollTo({behavior:"smooth",top:n?n-75+document.documentElement.scrollTop:0}),{type:"",payload:{}}}}}},544:function(e,t,n){var i=n(4569),s=n.n(i)().create({baseURL:"/api",timeout:5e3});s.interceptors.request.use((function(e){return e}),(function(){throw new Error("\u53d1\u8d77\u8bf7\u6c42\u51fa\u9519")})),s.interceptors.response.use((function(e){return e.data}),(function(e){if(e&&e.response&&e.response.status)switch(e.response.status){case 504:case 500:case 404:console.error("\u670d\u52a1\u5668\u5f02\u5e38");break;case 401:console.error("\u672a\u6388\u6743");break;case 403:console.error("\u65e0\u6743\u8bbf\u95ee");break;case 422:console.error("\u53c2\u6570\u51fa\u9519");break;default:console.error("\u672a\u77e5\u9519\u8bef")}})),t.Z=s},2123:function(e,t,n){n.r(t),n.d(t,{default:function(){return pe},getTypeName:function(){return de}});var i=n(1413),s=n(5861),a=n(5671),o=n(3144),r=n(136),c=n(8557),l=n(7757),d=n.n(l),u=n(2791),p=n(364),m=n(9109),x=n(4469),h=n(3695),f=n(7309),v=n(9228),y=n(9387),g=n(9990),j=n(184),_=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={typeList:[{name:"\u5355\u9009\u9898",icon:"icon-danxuan",question_type:"1"},{name:"\u591a\u9009\u9898",icon:"icon-duoxuankuang",question_type:"2"},{name:"\u5224\u65ad\u9898",icon:"icon-panduan2",question_type:"3"},{name:"\u591a\u9879\u586b\u7a7a",icon:"icon-tiankong",question_type:"4"},{name:"\u7b80\u7b54\u9898",icon:"icon-jianda2",question_type:"5"}],msgList:[{name:"\u59d3\u540d",icon:"icon-xingmingzhengjian"},{name:"\u624b\u673a",icon:"icon-dianhua"},{name:"\u73ed\u7ea7",icon:"icon-banjiguanli"}]},e.addQuestion=function(){var t=(0,s.Z)(d().mark((function t(n,i){var s,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props.scrollToBottom,t.next=3,(0,g.cN)({question_type:n,exam_id:i,creator_id:e.props.login_id});case 3:if("1001"!==t.sent.code){t.next=10;break}return t.next=7,(0,g.OM)({exam_id:i});case 7:a=t.sent,e.props.setOriginList({questionList:a.question_list}),s&&s();case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.state.typeList,t=this.addQuestion,n=this.props.exam_id;return(0,j.jsxs)("div",{className:"type-list",children:[(0,j.jsx)("div",{className:"list-title",children:"\u8003\u8bd5\u9898\u578b"}),(0,j.jsx)("div",{className:"list-content",children:e.map((function(e){return(0,j.jsxs)("div",{style:{position:"relative"},children:[(0,j.jsxs)(f.Z,{size:"small",style:{marginLeft:20,width:160,height:40,fontSize:"16px",textAlign:"left"},onClick:function(i){i.stopPropagation(),t(e.question_type,n)},children:[(0,j.jsx)("i",{style:{fontStyle:"normal",fontSize:18},className:"iconfont ".concat(e.icon)}),(0,j.jsx)("span",{className:"itemName",children:e.name})]}),(0,j.jsx)(v.Z,{placement:"right",trigger:"hover",overlayClassName:"store-question-preview",content:(0,j.jsxs)("div",{className:"preview-question",children:[(0,j.jsxs)("div",{className:"preview-title",children:["1"===e.question_type?"\u8bf7\u9009\u62e9\u4e00\u4e2a\u9009\u9879":"","2"===e.question_type?"\u8bf7\u9009\u62e9\u4ee5\u4e0b\u9009\u9879 (\u591a\u9009)":"","3"===e.question_type?"\u8bf7\u5224\u65ad\u672c\u9879\u53d9\u8ff0\u662f\u5426\u6b63\u786e\uff1f":"","4"===e.question_type?"\u8bf7\u586b\u5199\u4ee5\u4e0b\u5185\u5bb9":"","5"===e.question_type?"\u8bf7\u7b80\u8981\u9610\u8ff0\u4f60\u7684\u89c2\u70b9":""]}),"5"===e.question_type?(0,j.jsx)("textarea",{cols:21,rows:2}):"","1"===e.question_type||"2"===e.question_type?(0,j.jsx)("ul",{className:"preview-option",children:[1,2,3,4].map((function(t){return(0,j.jsxs)("li",{style:{display:"flex",alignItems:"center",padding:"3px 0"},children:[(0,j.jsx)("input",{style:{marginRight:5},readOnly:!0,disabled:!0,type:"2"===e.question_type?"checkbox":"radio"}),(0,j.jsx)("span",{children:"\u9009\u9879".concat(t)})]},t)}))}):"","3"===e.question_type?(0,j.jsx)("ul",{className:"preview-option",children:["\u662f","\u5426"].map((function(e){return(0,j.jsxs)("li",{style:{display:"flex",alignItems:"center",padding:"3px 0"},children:[(0,j.jsx)("input",{style:{marginRight:5},readOnly:!0,disabled:!0,type:"radio"}),(0,j.jsx)("span",{children:"".concat(e)})]},e)}))}):"","4"===e.question_type?(0,j.jsx)("ul",{className:"preview-option",children:[1,2].map((function(e){return(0,j.jsxs)("li",{style:{display:"block",alignItems:"center",padding:"3px 0"},children:[(0,j.jsx)("span",{children:"\u586b\u7a7a".concat(e)}),(0,j.jsx)("input",{type:"text",readOnly:!0,disabled:!0,style:{border:"1px solid #ccc",display:"block"}})]},e)}))}):""]}),children:(0,j.jsx)("span",{className:"iconfont icon-chakan",style:{position:"absolute",width:30,textAlign:"center",fontSize:20,top:"50%",transform:"translateY(-50%)",right:-60,cursor:"pointer"}})})]},e.icon)}))})]})}}]),n}(u.Component),w=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)(_),N=n(4942),Z=n(7326),S=n(63),k=n(8900),q=n(8757),T=n(6038),b=n(9421),C=n(938),L=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={question_store:[],newTypeState:!1,newTypeName:"",manageState:!1,keywords:"",searchResult:[],focusIndex:0,storeWindowList:[]},e.setStoreData=(0,s.Z)(d().mark((function t(){var n,i,s,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.login_id,i=void 0===n?-1:n,t.next=3,(0,g.h8)({creator_id:i});case 3:s=t.sent,a=s.question_store,e.setState({question_store:a});case 6:case"end":return t.stop()}}),t)}))),e.getTypeName=de,e.seachStore=function(t){var n=(0,Z.Z)(e).reduceStoreData;e.setState({keywords:t.target.value},(function(){var t=[],i=e.state.keywords;n.reduce((function(e,t){return t.question_list.forEach((function(t){-1!==t.question_name.indexOf(i)&&e.push(t)})),e}),t),e.setState({searchResult:t})}))},e.throttling=function(t,n){e.timer||(e.timer=setTimeout((function(){t(),e.timer=null}),n))},e.timer=null,e}return(0,o.Z)(n,[{key:"reduceStoreData",get:function(){var e=this.props.question_store,t=void 0===e?[]:e,n=this.props.typeList,s=void 0===n?[]:n;return s.length>0?s.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{question_list:t.filter((function(t){return+t.store_type===e.id})).map((function(e){return{id:e.id,creator_id:e.creator_id,question_name:e.question_name,question_image:e.question_image,question_score:e.question_score,question_type:e.question_type,store_type:e.store_type,answer:e.answer,option_list:Object.keys(e).filter((function(e){return-1!==e.indexOf("option")&&-1===e.indexOf("image")})).map((function(t,n){return(0,N.Z)({},"option".concat(n+1),e[t])})).filter((function(e){return Object.values(e)[0]}))}}))})})):[]}},{key:"componentDidMount",value:function(){this.setStoreData()}},{key:"render",value:function(){var e,t=this,n=this.reduceStoreData,a=this.seachStore,o=this.state,r=o.newTypeState,c=o.newTypeName,l=o.manageState,u=o.keywords,p=o.searchResult,m=o.focusIndex,x=this.state.storeWindowList,f=this.props.exam_id,y=void 0===f?-1:f,_=S.Z.Panel;return(0,j.jsxs)("div",{className:"question-store",children:[(0,j.jsx)("div",{className:"seach-in-store",children:(0,j.jsx)(k.Z,{placeholder:"\u641c\u7d22\u9898\u76ee",value:u,onChange:a,style:{background:"url(http://192.168.5.104:5008/img/search-icon.png) 8px 8px / 18px 18px no-repeat white",paddingLeft:30,height:35}})}),(0,j.jsxs)("div",{className:"store-module person",children:[(0,j.jsx)("h2",{children:"\u4e2a\u4eba\u9898\u5e93"}),(0,j.jsxs)("div",{className:"operation",children:[(0,j.jsx)("span",{className:"new-store",style:{cursor:"pointer"},onClick:function(){t.setState({newTypeState:!0})},children:"\u65b0\u5efa\u5206\u7c7b"}),(0,j.jsxs)(q.Z,{title:"\u65b0\u5efa\u9898\u5e93\u5206\u7c7b",visible:r,centered:!0,cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:(0,s.Z)(d().mark((function e(){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.login_id,i=void 0===n?-1:n,e.next=3,(0,g.Xk)({type_name:c,creator_id:i});case 3:"1001"===(s=e.sent).code?(t.setState({newTypeState:!1}),t.props.init()):"1002"===s.code&&h.ZP.warning(s.msg);case 5:case"end":return e.stop()}}),e)}))),onCancel:function(){t.setState({newTypeState:!1})},children:[(0,j.jsxs)("p",{children:["\u5206\u7c7b\u540d\u79f0",(0,j.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,j.jsx)(k.Z,{showCount:!0,maxLength:10,onChange:function(e){t.setState({newTypeName:e.currentTarget.value})}})]}),(0,j.jsx)("span",{className:"store-manage",style:{cursor:"pointer"},onClick:function(){t.setState({manageState:!0,focusIndex:0,storeWindowList:t.reduceStoreData.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isEdit:!1,question_list:e.question_list.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isShow:!1})}))})}))})},children:"\u7ba1\u7406"}),(0,j.jsx)(q.Z,{style:{minWidth:900},bodyStyle:x.length>0?{minHeight:500,padding:0}:{minHeight:500,padding:0,display:"flex",justifyContent:"center",alignItems:"center"},title:(0,j.jsx)("p",{style:{marginBottom:0},children:(0,j.jsx)("span",{children:"\u4e2a\u4eba\u9898\u5e93"})}),visible:l,centered:!0,maskClosable:!1,cancelText:"\u53d6\u6d88",okText:"\u4fdd\u5b58",onOk:(0,s.Z)(d().mark((function e(){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.login_id,i=void 0===n?-1:n,e.next=3,(0,g.FX)({creator_id:i,storeWindowList:x});case 3:"1001"===e.sent.code&&t.setStoreData(),t.setState({manageState:!1});case 6:case"end":return e.stop()}}),e)}))),onCancel:function(){t.setState({manageState:!1})},children:x.length>0?(0,j.jsxs)("div",{className:"store-manage-window",children:[(0,j.jsx)("div",{className:"store-type-list",children:(0,j.jsx)("ul",{children:x.map((function(e,n){var i;return(0,j.jsx)("li",{className:m===n?"focus":"",onClick:function(){t.setState({focusIndex:n})},children:e.isEdit?(0,j.jsx)(k.Z,{size:"small",value:e.type_name,onChange:function(n){e.type_name=n.currentTarget.value,t.setState({storeWindowList:x})},autoFocus:!0,onBlur:function(){x[n].isEdit=!1,t.setState({storeWindowList:x})}}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"store-name",children:e.type_name}),(0,j.jsx)("span",{className:"store-count",children:null===(i=e.question_list)||void 0===i?void 0:i.length}),(0,j.jsx)(v.Z,{placement:"right",overlayInnerStyle:{padding:0},overlayClassName:"store-manage-window-type-operation",content:(0,j.jsxs)("ul",{className:"store-manage-window-type-operation-list",style:{marginBottom:0},children:[(0,j.jsx)("li",{onClick:function(){e.isEdit=!0,t.setState({storeWindowList:x})},children:"\u91cd\u547d\u540d"}),(0,j.jsx)(T.Z,{placement:"right",title:"\u5220\u9664\u540e\u5c06\u5220\u9664\u5206\u7ec4\u5185\u6240\u6709\u9898\u76ee",onConfirm:function(){x.splice(n,1),t.setState({storeWindowList:x})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,j.jsx)("li",{children:"\u5220\u9664"})})]}),trigger:"hover",children:(0,j.jsx)("span",{className:"store-operation iconfont icon-more"})})]})},e.id)}))})}),(0,j.jsx)("div",{className:x[m].question_list.length>0?"store-question-list":"store-question-list empty",children:x[m].question_list.length>0?(0,j.jsx)("ul",{children:null===(e=x[m].question_list)||void 0===e?void 0:e.map((function(e,n){return(0,j.jsxs)("li",{className:"question-item",children:[(0,j.jsx)("div",{className:"question-type",children:de(e.question_type)}),(0,j.jsx)("div",{className:"question-name",children:e.question_name}),e.isShow?(0,j.jsx)("div",{className:"option",style:"4"===e.question_type||"5"===e.question_type?{paddingLeft:0,marginTop:10}:{marginTop:18},children:"1"===e.question_type||"2"===e.question_type||"3"===e.question_type?e.option_list.map((function(t,n){return(0,j.jsxs)("p",{children:[(0,j.jsx)("input",{type:"2"===e.question_type?"checkbox":"radio",disabled:!0,readOnly:!0,style:{marginRight:10}}),(0,j.jsx)("span",{children:t["option".concat(n+1)]}),"2"!==e.question_type&&e.answer==="".concat(n)?(0,j.jsx)("span",{style:{paddingLeft:10,color:"#00bf6f"},children:"(\u6b63\u786e\u7b54\u6848)"}):"","2"===e.question_type&&-1!==e.answer.indexOf("".concat(n))?(0,j.jsx)("span",{style:{paddingLeft:10,color:"#00bf6f"},children:"(\u6b63\u786e\u7b54\u6848)"}):""]},n)})):"4"===e.question_type?e.option_list.map((function(e,t){return(0,j.jsxs)("p",{style:{flexDirection:"column",alignItems:"flex-start"},children:[(0,j.jsx)("span",{style:{paddingLeft:10},children:e["option".concat(t+1)]}),(0,j.jsx)("input",{type:"text",style:{border:"1px solid #eaeaea",display:"block",margin:"5px 0 0"}})]},t)})):"5"===e.question_type?(0,j.jsx)("p",{children:(0,j.jsx)("textarea",{name:"",id:"",cols:21,rows:2})}):(0,j.jsx)(j.Fragment,{})}):"",(0,j.jsxs)("div",{className:"show-flag hidden",onClick:function(){e.isShow=!e.isShow,t.setState({storeWindowList:x})},children:[(0,j.jsx)("span",{style:{cursor:"pointer"},children:e.isShow?"\u6536\u8d77\u5168\u90e8":"\u5c55\u5f00\u5168\u90e8"}),(0,j.jsx)("span",{className:e.isShow?"iconfont icon-paixu-shang":"iconfont icon-paixu-xia"})]}),(0,j.jsx)("span",{className:"iconfont icon-shanchu",onClick:function(){x[m].question_list.splice(n,1),t.setState({storeWindowList:x})}})]},e.id)}))}):(0,j.jsx)(b.Z,{description:"\u6682\u65e0\u5185\u5bb9"})})]}):(0,j.jsx)(b.Z,{description:"\u6682\u65e0\u5185\u5bb9"})})]})]}),(0,j.jsx)("div",{className:"store-list-module person",children:u?(0,j.jsx)(j.Fragment,{children:p.length>0?(0,j.jsx)("ul",{children:p.map((function(e){return(0,j.jsxs)("li",{className:"question-item-search",style:{display:"flex",justifyContent:"space-between",padding:"2px 2px 2px 10px"},children:[(0,j.jsx)("span",{style:{cursor:"pointer"},onClick:function(){var n=(0,s.Z)(d().mark((function n(i){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.stopPropagation(),n.next=3,(0,g.XV)({exam_id:y,id:e.id?e.id:-1});case 3:"1001"===n.sent.code&&t.props.init((function(){t.props.scrollToBottom&&t.props.scrollToBottom()}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),children:0===e.question_name.indexOf(u)?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"highLight",children:u}),(0,j.jsx)("span",{children:e.question_name.replace(u,"")})]}):e.question_name.indexOf(u)+u.length>=e.question_name.length?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:e.question_name.replace(u,"")}),(0,j.jsx)("span",{className:"highLight",children:u})]}):(0,j.jsxs)(j.Fragment,{children:[e.question_name.split(u)[0],(0,j.jsx)("span",{className:"highLight",children:u}),e.question_name.split(u)[e.question_name.split(u).length-1]]})}),(0,j.jsx)(v.Z,{placement:"right",trigger:"hover",overlayClassName:"store-question-preview",content:(0,j.jsxs)("div",{className:"preview-question",children:[(0,j.jsx)("div",{className:"preview-title",children:e.question_name}),"5"===e.question_type?(0,j.jsx)("textarea",{cols:21,rows:2}):(0,j.jsx)("ul",{className:"preview-option",children:e.option_list.map((function(t,n){return(0,j.jsxs)("li",{style:{display:"".concat("4"!==e.question_type?"flex":"block"),alignItems:"center",padding:"3px 0"},children:["1"===e.question_type||"2"===e.question_type||"3"===e.question_type?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("input",{style:{marginRight:5},readOnly:!0,disabled:!0,type:"2"===e.question_type?"checkbox":"radio"}),(0,j.jsx)("span",{children:t["option".concat(n+1)]}),n===+e.answer||-1!==e.answer.indexOf("".concat(n))?(0,j.jsx)("span",{style:{color:"rgb(0, 191, 111)",fontSize:12,paddingLeft:5},children:"\uff08\u6b63\u786e\u7b54\u6848\uff09"}):""]}):"","4"===e.question_type?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:t["option".concat(n+1)]}),(0,j.jsx)("input",{type:"text",readOnly:!0,disabled:!0,style:{border:"1px solid #ccc",display:"block"}})]}):""]},n)}))})]}),children:(0,j.jsx)("span",{className:"view iconfont icon-chakan",style:{cursor:"pointer"}})})]},e.id)}))}):(0,j.jsx)(b.Z,{description:"\u6682\u65e0\u641c\u7d22\u5185\u5bb9\uff0c\u53ef\u4ee5\u6362\u4e2a\u8bcd\u8bd5\u8bd5"})}):(0,j.jsx)(j.Fragment,{children:n.length>0?(0,j.jsx)(S.Z,{bordered:!1,expandIcon:function(e){var t=e.isActive;return(0,j.jsx)(C.Z,{rotate:t?90:0})},className:"site-collapse-custom-collapse",children:n.map((function(e){return(0,j.jsx)(_,{header:e.type_name,extra:(0,j.jsx)("span",{children:e.question_list.length}),className:"site-collapse-custom-panel",children:(0,j.jsx)("div",{className:"store-question-list",children:e.question_list.map((function(e){return(0,j.jsxs)("div",{style:{cursor:"auto"},className:"question-item",children:[(0,j.jsx)("span",{style:{cursor:"pointer"},onClick:function(){var n=(0,s.Z)(d().mark((function n(i){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.stopPropagation(),n.next=3,(0,g.XV)({exam_id:y,id:e.id});case 3:"1001"===n.sent.code&&t.props.init((function(){t.props.scrollToBottom&&t.props.scrollToBottom()}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),children:e.question_name}),(0,j.jsx)(v.Z,{placement:"right",trigger:"hover",overlayClassName:"store-question-preview",content:(0,j.jsxs)("div",{className:"preview-question",children:[(0,j.jsx)("div",{className:"preview-title",children:e.question_name}),"5"===e.question_type?(0,j.jsx)("textarea",{cols:21,rows:2}):(0,j.jsx)("ul",{className:"preview-option",children:e.option_list.map((function(t,n){return(0,j.jsxs)("li",{style:{display:"".concat("4"!==e.question_type?"flex":"block"),alignItems:"center",padding:"3px 0"},children:["1"===e.question_type||"2"===e.question_type||"3"===e.question_type?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("input",{style:{marginRight:5},readOnly:!0,disabled:!0,type:"2"===e.question_type?"checkbox":"radio"}),(0,j.jsx)("span",{children:t["option".concat(n+1)]}),n===+e.answer||-1!==e.answer.indexOf("".concat(n))?(0,j.jsx)("span",{style:{color:"rgb(0, 191, 111)",fontSize:12,paddingLeft:5},children:"\uff08\u6b63\u786e\u7b54\u6848\uff09"}):""]}):"","4"===e.question_type?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:t["option".concat(n+1)]}),(0,j.jsx)("input",{type:"text",readOnly:!0,disabled:!0,style:{border:"1px solid #ccc",display:"block"}})]}):""]},n)}))})]}),children:(0,j.jsx)("span",{className:"view iconfont icon-chakan",style:{cursor:"pointer"}})})]},e.id)}))})},e.id)}))}):(0,j.jsx)(b.Z,{description:"\u6682\u65e0\u5185\u5bb9"})})})]})}}]),n}(u.Component),P=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)(L),E=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.questionList,n=e.scrollToActiveQues;return(0,j.jsx)("div",{className:"outline",children:(0,j.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,t){return(0,j.jsx)("li",{onClick:function(e){e.stopPropagation(),n&&n(t)},children:"".concat(t+1,". ").concat(e.question_name)},e.id)}))})})}}]),n}(u.Component),O=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)(E),F=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={activeTab:0,tabList:["\u9898\u578b","\u9898\u5e93","\u5927\u7eb2"]},e.changeTab=function(t){e.setState({activeTab:t})},e}return(0,o.Z)(n,[{key:"navBody",get:function(){switch(this.state.activeTab){case 0:return(0,j.jsx)(w,{});case 1:return(0,j.jsx)(P,{init:this.props.init});case 2:return(0,j.jsx)(O,{})}}},{key:"render",value:function(){var e=this.state,t=e.activeTab,n=e.tabList,i=this.changeTab,s=this.navBody;return(0,j.jsxs)("div",{className:"left-nav-box",children:[(0,j.jsx)("div",{className:"tab-nav",children:n.map((function(e,n){return(0,j.jsx)("span",{className:n===t?"active":"",onClick:function(){i(n)},children:e},n)}))}),(0,j.jsx)("div",{className:"nav-body",children:s})]})}}]),n}(u.Component),I=n(3734),U=n(2014),z=n(8243),B=n(5581),Q=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={typeList:["\u5355\u9009\u9898","\u591a\u9009\u9898","\u5224\u65ad\u9898","\u591a\u9879\u586b\u7a7a","\u7b80\u7b54\u9898"]},e.changeType=function(){var t=(0,s.Z)(d().mark((function t(n){var s,a,o,r,c,l,u,p,m;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props,a=s.focusMSG,o=s.setQuesType,r=s.init,c=s.setFocusMsg,l=s.exam_id,u=(0,Z.Z)(e),p=u.getType,o({ques_type:n}),t.next=5,(0,g.h3)({exam_id:l||-1,id:a&&a.id?a.id:-1,type:p(n)});case 5:"1001"===t.sent.code&&(m=(null===a||void 0===a?void 0:a.option_list)||[],c((0,i.Z)((0,i.Z)({},a),{},{id:null!==a&&void 0!==a&&a.id?null===a||void 0===a?void 0:a.id:-1,option_list:m,question_type:p(n),answer:"1"===p(n)||"2"===p(n)||"3"===p(n)?"0":""})),r());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeScore=function(){var t=(0,s.Z)(d().mark((function t(n){var a,o,r,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,o=a.setFocusMsg,r=a.focusMSG,c=a.exam_id,o((0,i.Z)((0,i.Z)({},r),{},{id:null!==r&&void 0!==r&&r.id?r.id:-1,option_list:null!==r&&void 0!==r&&r.option_list?null===r||void 0===r?void 0:r.option_list:[],question_score:n})),e.debounce((0,s.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.vz)({exam_id:c||-1,id:null!==r&&void 0!==r&&r.id?r.id:-1,score:n});case 2:case"end":return e.stop()}}),e)}))),300);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeShowSerial=function(t){e.props.changeShowSerial&&e.props.changeShowSerial({showSerial:t})},e.getType=function(e){switch(e){case"\u5355\u9009\u9898":default:return"1";case"\u591a\u9009\u9898":return"2";case"\u5224\u65ad\u9898":return"3";case"\u591a\u9879\u586b\u7a7a":return"4";case"\u7b80\u7b54\u9898":return"5"}},e.timer=null,e.debounce=function(t,n){e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){t()}),n)},e}return(0,o.Z)(n,[{key:"render",value:function(){var e=I.Z.Option,t=this.state.typeList,n=this.changeType,a=this.changeScore,o=this.changeShowSerial,r=this.props,c=r.ques_type,l=r.question_focus,u=r.focusMSG,p=r.exam_id,m=r.setFocusMsg,x=r.init,h=r.showSerial,f="ABCDEFGHIJ",v=null!==u&&void 0!==u&&u.option_list?null===u||void 0===u?void 0:u.option_list.filter((function(e){return!!e.option_name})):[];return(0,j.jsxs)("div",{className:"exam-right-box",children:[(0,j.jsx)("div",{className:"title",style:{borderBottom:"1px solid #d8d8d8"},children:"\u9898\u76ee\u8bbe\u7f6e"}),-1===l?"":(0,j.jsxs)("div",{className:"question-info",children:[(0,j.jsx)("h2",{className:"type",children:c}),(0,j.jsx)("p",{className:"set",children:"\u6574\u9898\u8bbe\u7f6e"}),(0,j.jsxs)("div",{className:"changeType",children:[(0,j.jsx)("span",{children:"\u5207\u6362\u9898\u578b"}),(0,j.jsx)(I.Z,{style:{width:100,float:"right"},onChange:n,value:c,size:"small",children:t.map((function(t,n){return(0,j.jsx)(e,{value:t,children:t},n)}))})]}),"\u5355\u9009\u9898"===c||"\u591a\u9009\u9898"===c||"\u5224\u65ad\u9898"===c?(0,j.jsxs)("div",{className:"answer",children:[(0,j.jsx)("p",{children:"\u7b54\u6848"}),(0,j.jsxs)("div",{className:"answer-option",children:["\u5355\u9009\u9898"===c||"\u5224\u65ad\u9898"===c?(0,j.jsx)(I.Z,{size:"small",value:null===u||void 0===u?void 0:u.answer,onChange:function(){var e=(0,s.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.s9)({exam_id:p||-1,id:u&&u.id?u.id:-1,answer:t});case 2:"1001"===(n=e.sent).code&&(m((0,i.Z)((0,i.Z)({},u),{},{id:null!==u&&void 0!==u&&u.id?null===u||void 0===u?void 0:u.id:-1,option_list:null!==u&&void 0!==u&&u.option_list?null===u||void 0===u?void 0:u.option_list:[],answer:n.answer})),x());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{width:223},children:v.length>0?v.map((function(t,n){return(0,j.jsx)(e,{value:"".concat(n),children:"".concat(h?"".concat(f[n],"."):"").concat(t.option_name)},"".concat(n,"_").concat(t.option_name))})):(0,j.jsx)(j.Fragment,{})}):(0,j.jsx)(j.Fragment,{}),"\u591a\u9009\u9898"===c?(0,j.jsx)(j.Fragment,{children:v.length>0?v.map((function(e,t){var n;return(0,j.jsx)("div",{children:(0,j.jsx)(U.Z,{checked:-1!==(null===u||void 0===u||null===(n=u.answer)||void 0===n?void 0:n.indexOf("".concat(t))),onChange:(0,s.Z)(d().mark((function e(){var n,s,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===u||void 0===u||null===(n=u.answer)||void 0===n?void 0:n.split(","),-1===(a=s?s.indexOf("".concat(t)):-1)?null===s||void 0===s||s.push("".concat(t)):null===s||void 0===s||s.splice(a,1),e.next=5,(0,g.s9)({exam_id:p||-1,id:u&&u.id?u.id:-1,answer:s?s.sort((function(e,t){return+e-+t})).join(","):"0"});case 5:"1001"===(o=e.sent).code&&(m((0,i.Z)((0,i.Z)({},u),{},{id:null!==u&&void 0!==u&&u.id?null===u||void 0===u?void 0:u.id:-1,option_list:null!==u&&void 0!==u&&u.option_list?null===u||void 0===u?void 0:u.option_list:[],answer:o.answer})),x());case 7:case"end":return e.stop()}}),e)}))),children:"".concat(h?"".concat(f[t],"."):"").concat(e.option_name)})},"".concat(t,"_").concat(e.option_name))})):(0,j.jsx)(j.Fragment,{})}):(0,j.jsx)(j.Fragment,{})]})]}):"",(0,j.jsxs)("div",{className:"score",children:[(0,j.jsx)("span",{children:"\u6b64\u9898\u5206\u503c"}),(0,j.jsxs)("div",{children:[(0,j.jsx)(z.Z,{min:1,max:100,size:"small",value:null===u||void 0===u?void 0:u.question_score,style:{width:62,height:26},onChange:a}),(0,j.jsx)("span",{className:"padding",children:"\u5206"})]})]}),"\u5355\u9009\u9898"===c||"\u591a\u9009\u9898"===c||"\u5224\u65ad\u9898"===c?(0,j.jsx)("div",{className:"option-type",children:(0,j.jsxs)("p",{style:{marginBottom:5},children:[(0,j.jsx)("span",{children:"\u9009\u9879\u663e\u793a\u5e8f\u53f7"}),(0,j.jsx)(B.Z,{checked:h,size:"small",onClick:o})]})}):""]})]})}}]),n}(u.Component),M=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)(Q),A=n(8054),R=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}();function V(e,t,n){if(!e)return n(!1);var i=document.createElement("canvas"),s=new Image;s.onload=function(){var a=i.getContext("2d");i.width=s.width,i.height=s.height,a.drawImage(s,0,0);var o=function(e){var t,n;t=-1!==e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0];for(var i=[],s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return new Blob([new Uint8Array(i)],{type:n})}(e=i.toDataURL("image/jpeg",t));n(o)},s.src=e}var H=R;function W(e,t,n){var i=(t=t||{}).scale;if(!R)return n(e);if(!i||1==i)return n(e);for(var s=e.length,a=[],o=0,r=e.length;o<r;o++){var c=new FileReader;c.onload=function(e){V(e.target.result,i,(function(e){e&&a.push(e),--s<=0&&n&&n(a)}))},c.readAsDataURL(e[o])}}var D=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={defaultData:{id:-1,question_name:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u9009\u9879",question_image:"",question_type:"",question_score:5,store_type:-1,answer:"0",option_list:[{option_name:"\u9009\u98791",option_image:""},{option_name:"\u9009\u98792",option_image:""},{option_name:"\u9009\u98793",option_image:""},{option_name:"\u9009\u98794",option_image:""}]},imageUid:"",fileType:"",acceptFileType:".jpg,.jpeg,.gif,.png,.bmp,.webp",modalState:!1,addNewTypeStatus:!1,newTypeName:"",popVisi:!1},e.handleVisibleChange=function(t){e.setState({popVisi:t})},e.addStoreAndClose=function(){var t=(0,s.Z)(d().mark((function t(n){var i,s,a,o,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props,s=i.question_data,a=i.login_id,o=void 0===a?-1:a,r=i.init,t.next=3,(0,g.bN)({id:s.id||-1,creator_id:o,store_type_id:n});case 3:"1001"===t.sent.code&&(r(),h.ZP.success("\u6536\u85cf\u6210\u529f"),e.setState({popVisi:!1}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getQuesType=function(e){switch(e){case"1":case"3":return"radio";case"2":return"checkbox";default:return""}},e.select=function(e){e.target.select()},e.imageUploadBefore=function(t){return new Promise((function(n,i){e.setState({imageUid:t.uid,fileType:t.type},(function(){if(-1===e.state.acceptFileType.indexOf(t.type.slice(t.type.indexOf("/")+1)))return h.ZP.info("\u6682\u4e0d\u652f\u6301\u8be5\u6587\u4ef6\u683c\u5f0f"),void i();if(t.size>2097152){if(!H)return h.ZP.info("\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72M"),void i();W([t],{scale:.92},(function(e){return e[0].size>2097152?(h.ZP.info("\u6587\u4ef6\u8fc7\u5927\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),void i()):void n(e[0])}))}else n(t)}))}))},e.imageUploadChange=function(t){var n;if("done"===(null===(n=t.file)||void 0===n?void 0:n.status)){var i,s,a,o,r,c=t.file,l=c.type,d=c.uid,u="".concat(null===l||void 0===l?void 0:l.replace("image/","/upload/".concat(d,".")));if(e.props.updateQuesList&&"1001"===(null===(i=t.file.response)||void 0===i?void 0:i.code))e.props.updateQuesList({id:null!==(s=t.file.response)&&void 0!==s&&s.id?null===(a=t.file.response)||void 0===a?void 0:a.id:-1,index:null!==(o=t.file.response)&&void 0!==o&&o.index?null===(r=t.file.response)||void 0===r?void 0:r.index:-1,imgUrl:u})}},e.deleteSure=(0,s.Z)(d().mark((function t(){var n,i,s,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,i=n.focusMSG,s=n.exam_id,a=void 0===s?-1:s,t.next=3,(0,g.Km)({exam_id:a,id:null!==i&&void 0!==i&&i.id?null===i||void 0===i?void 0:i.id:-1});case 3:"1001"===t.sent.code&&e.setState({modalState:!1});case 5:case"end":return t.stop()}}),t)}))),e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.getQuesType,n=this.select,a=this.imageUploadBefore,o=this.imageUploadChange,r=this.deleteSure,c=this.handleVisibleChange,l=this.addStoreAndClose,u=this.state,p=u.imageUid,m=u.fileType,x=u.acceptFileType,y=u.modalState,_=u.addNewTypeStatus,w=u.newTypeName,Z=u.popVisi,S=this.props,b=S.login_id,C=void 0===b?-1:b,L=S.exam_id,P=void 0===L?-1:L,E=S.index,O=S.type,F=S.focusMSG,I=S.setFocusMsg,U=S.hiddenHolder,z=void 0===U?[]:U,B=S.setHiddenHolder,Q=S.showSerial,M=S.typeList,R=void 0===M?[]:M,V=S.init,H=this.props.question_data||this.state.defaultData,W=(0,j.jsxs)("div",{className:"type-window",children:[R.length>0?(0,j.jsx)("ul",{children:R.map((function(e){return(0,j.jsxs)("li",{children:[(0,j.jsx)("span",{children:e.type_name}),(0,j.jsx)("span",{className:"add-type",onClick:function(){l(e.id)},children:"\u6dfb\u52a0"})]},e.id)}))}):"",_?(0,j.jsxs)("div",{className:"new-type-name",children:[(0,j.jsx)(k.Z,{style:{marginTop:5,height:26,fontSize:14,paddingLeft:7},showCount:!0,maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0",value:w,onChange:function(t){e.setState({newTypeName:t.currentTarget.value})}}),(0,j.jsxs)("div",{className:"new-type-btn",style:{textAlign:"right",cursor:"default"},children:[(0,j.jsx)("span",{className:"cancel",style:{marginRight:10,cursor:"pointer"},onClick:function(){e.setState({addNewTypeStatus:!1})},children:"\u53d6\u6d88"}),(0,j.jsx)("span",{className:"create",style:{cursor:"pointer",color:"#2672ff"},onClick:(0,s.Z)(d().mark((function t(){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.Xk)({type_name:w,creator_id:C});case 2:"1001"===(n=t.sent).code?(e.setState({addNewTypeStatus:!1}),e.props.init()):"1002"===n.code&&h.ZP.warning(n.msg);case 4:case"end":return t.stop()}}),t)}))),children:"\u521b\u5efa"})]})]}):(0,j.jsx)(j.Fragment,{}),(0,j.jsxs)("div",{className:"add-new-type",onClick:function(){e.setState({addNewTypeStatus:!0})},children:[(0,j.jsx)("span",{className:"iconfont icon-tianjia"}),(0,j.jsx)("span",{children:"\u65b0\u5efa\u5206\u7c7b"})]})]});return(0,j.jsxs)("div",{className:"ques-content",children:[(0,j.jsxs)("div",{className:"title",children:[(0,j.jsxs)("div",{className:"text-wrap",children:[(0,j.jsx)("input",{type:"text",className:"title-text",defaultValue:H.question_name,onBlur:function(e){I((0,i.Z)((0,i.Z)({},F),{},{id:null!==F&&void 0!==F&&F.id?F.id:-1,option_list:null!==F&&void 0!==F&&F.option_list?F.option_list:[],question_name:e.currentTarget.value}))},onFocus:n}),(0,j.jsx)("div",{className:"option-tools",children:(0,j.jsx)(A.Z,{name:"file",data:{type:"question",index:-1,id:H.id,imageUid:p,imageType:m},maxCount:1,accept:x,action:"/api/examEdit/uploadImage",headers:{authorization:"authorization-text"},beforeUpload:a,onChange:o,children:(0,j.jsx)("span",{className:"iconfont icon-tupian",title:"\u63d2\u5165\u56fe\u7247"})})}),H.question_image?(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"img-container",style:{maxWidth:900,display:"inline-block"},children:[(0,j.jsx)("img",{style:{marginLeft:0,maxWidth:"100%"},src:"http://192.168.5.104:5008".concat(H.question_image),alt:""}),(0,j.jsx)(T.Z,{placement:"right",title:"\u786e\u5b9a\u5220\u9664\u8be5\u56fe\u7247\uff1f",onConfirm:(0,s.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.CM)({id:H.id?H.id:-1,index:-1});case 2:"1001"===e.sent.code&&V();case 4:case"end":return e.stop()}}),e)}))),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",children:(0,j.jsx)("span",{className:"iconfont icon-shanchu remove",title:"\u5220\u9664\u56fe\u7247"})})]})}):"",(0,j.jsxs)("div",{className:"operation",children:[H.id_in_store&&H.id_in_store>0?(0,j.jsx)("span",{className:"iconfont icon-favorite isInStore",title:"\u53d6\u6d88\u6536\u85cf",onClick:function(){var e=(0,s.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(H.id_in_store&&H.id_in_store>0)){e.next=6;break}return t.stopPropagation(),e.next=4,(0,g.rs)({id:H.id?H.id:-1,id_in_store:H.id_in_store});case 4:"1001"===e.sent.code&&(h.ZP.success("\u53d6\u6d88\u6536\u85cf"),V());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):(0,j.jsx)(v.Z,{placement:"bottom",content:W,trigger:"click",style:{height:500},visible:Z,onVisibleChange:c,children:(0,j.jsx)("span",{className:"iconfont icon-favorite",title:"\u6536\u85cf\u81f3\u9898\u5e93"})}),(0,j.jsx)("span",{className:"iconfont icon-fuzhi1",title:"\u590d\u5236\u9898\u76ee",onClick:(0,s.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.dP)({exam_id:P,id:H.id?H.id:-1});case 2:"1001"===t.sent.code&&e.props.init((function(){e.props.scrollToBottom&&e.props.scrollToBottom()}));case 4:case"end":return t.stop()}}),t)})))}),(0,j.jsx)("span",{className:"iconfont icon-shanchu",title:"\u5220\u9664\u9898\u76ee",onClick:function(){e.setState({modalState:!0})}})]}),(0,j.jsx)(q.Z,{title:"\u5220\u9664\u9898\u76ee\u786e\u8ba4",centered:!0,visible:y,onOk:r,onCancel:function(){e.setState({modalState:!1})},afterClose:function(){e.props.setQuesFocus({index:-1}),e.props.init()},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,j.jsx)("p",{children:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f"})})]}),(0,j.jsxs)("span",{className:"must-fill normal",children:[(0,j.jsx)("span",{className:"red",children:"*"}),(0,j.jsx)("span",{className:"index",children:E+1})]})]}),H.option_list?H.option_list.filter((function(e){return null!==e.option_name})).map((function(e,r){return(0,j.jsxs)("div",{className:"option-item",children:[(0,j.jsx)("input",{type:t(O),className:"showInp",disabled:!0,name:"radio".concat(E),id:"radio".concat(E,"_").concat(r)}),(0,j.jsxs)("label",{htmlFor:"".concat(t(O)).concat(E,"_").concat(r),children:[(0,j.jsx)("input",{type:"text",value:e.option_name,className:"inputOption".concat(Q?" showSerial":""),onFocus:n,onInput:function(e){z[E].option_list[r].option_name=e.currentTarget.value,B&&B({hiddenHolder:z}),F&&(F.option_list[r].option_name=e.currentTarget.value),I((0,i.Z)((0,i.Z)({},F),{},{id:null!==F&&void 0!==F&&F.id?F.id:-1,option_list:null!==F&&void 0!==F&&F.option_list?F.option_list:[]}))}}),(0,j.jsxs)("div",{className:"hiddenHolder",children:[(0,j.jsx)("span",{className:"serial",children:Q?"".concat("ABCDEFGHIJ"[r],"."):""}),z[E].option_list[r]?(0,j.jsx)("span",{className:"placeHolder",children:z[E].option_list[r].option_name}):"",-1!==H.answer.indexOf("".concat(r))?(0,j.jsx)("span",{style:{color:"#00bf6f",fontSize:14,float:"right"},children:"\uff08\u6b63\u786e\u7b54\u6848\uff09"}):""]}),"3"!==O?(0,j.jsxs)("div",{className:"option-tools",children:[(0,j.jsx)(A.Z,{name:"file",data:{type:"option",index:r,id:H.id,imageUid:p,imageType:m},maxCount:1,accept:x,action:"/api/examEdit/uploadImage",headers:{authorization:"authorization-text"},beforeUpload:a,onChange:o,children:(0,j.jsx)("span",{className:"iconfont icon-tupian",title:"\u63d2\u5165\u56fe\u7247"})}),(0,j.jsx)("span",{className:"iconfont icon-jianshao",title:"\u79fb\u9664\u6b64\u9879",onClick:(0,s.Z)(d().mark((function e(){var t,n,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.id,n=void 0===t?-1:t,e.next=3,(0,g.Jk)({id:n,index:r});case 3:"1001"===e.sent.code&&((s=H.option_list).splice(r,1),I((0,i.Z)((0,i.Z)({},F),{},{id:n,option_list:s})),V());case 5:case"end":return e.stop()}}),e)})))})]}):""]}),e.option_image?(0,j.jsxs)("div",{className:"img-container",style:{maxWidth:900,display:"inline-block",marginLeft:51},children:[(0,j.jsx)("img",{style:{marginLeft:0,maxWidth:"100%"},src:"http://192.168.5.104:5008".concat(e.option_image),alt:""}),(0,j.jsx)(T.Z,{placement:"right",title:"\u786e\u5b9a\u5220\u9664\u8be5\u56fe\u7247\uff1f",onConfirm:(0,s.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.CM)({id:H.id?H.id:-1,index:r});case 2:"1001"===e.sent.code&&V();case 4:case"end":return e.stop()}}),e)}))),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",children:(0,j.jsx)("span",{className:"iconfont icon-shanchu remove",title:"\u5220\u9664\u56fe\u7247"})})]}):""]},"".concat(e,"_").concat(E,"_").concat(r))})):"","3"!==H.question_type?(0,j.jsx)("div",{className:"addOption",children:(0,j.jsx)(f.Z,{style:{margin:"5px 0 0 50px"},type:"primary",ghost:!0,onClick:(0,s.Z)(d().mark((function e(){var t,n,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=H.id,n=void 0===t?-1:t,!(H.option_list.length>=10)){e.next=5;break}h.ZP.warning("\u6700\u591a\u6dfb\u52a010\u4e2a\u9009\u9879"),e.next=9;break;case 5:return e.next=7,(0,g.Zm)({id:n});case 7:"1001"===(s=e.sent).code&&(a=s.optionListRes.filter((function(e,t){return null!==e["option".concat(t+1)]})).map((function(e,t){var n;return n={},(0,N.Z)(n,"option_name",e["option".concat(t+1)]),(0,N.Z)(n,"option_image",e["option".concat(t+1,"_image")]),n})),I((0,i.Z)((0,i.Z)({},F),{},{id:n,option_list:a})),V());case 9:case"end":return e.stop()}}),e)}))),children:"\u6dfb\u52a0\u9009\u9879"})}):""]})}}]),n}(u.Component),G=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)(D),$=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={defaultData:{id:-1,question_name:"\u8bf7\u586b\u5199\u4ee5\u4e0b\u5185\u5bb9",question_image:"",question_type:"",question_score:10,store_type:-1,answer:"",option_list:[{option_name:"\u586b\u7a7a1",option_image:""},{option_name:"\u586b\u7a7a2",option_image:""}]},imageUid:"",fileType:"",acceptFileType:".jpg,.jpeg,.gif,.png,.bmp,.webp",modalState:!1,addNewTypeStatus:!1,newTypeName:"",popVisi:!1},e.handleVisibleChange=function(t){e.setState({popVisi:t})},e.addStoreAndClose=function(){var t=(0,s.Z)(d().mark((function t(n){var i,s,a,o,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props,s=i.question_data,a=i.login_id,o=void 0===a?-1:a,r=i.init,t.next=3,(0,g.bN)({id:s.id||-1,creator_id:o,store_type_id:n});case 3:"1001"===t.sent.code&&(r(),h.ZP.success("\u6536\u85cf\u6210\u529f"),e.setState({popVisi:!1}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.select=function(e){e.target.select()},e.imageUploadBefore=function(t){return new Promise((function(n,i){e.setState({imageUid:t.uid,fileType:t.type},(function(){if(-1===e.state.acceptFileType.indexOf(t.type.slice(t.type.indexOf("/")+1)))return h.ZP.info("\u6682\u4e0d\u652f\u6301\u8be5\u6587\u4ef6\u683c\u5f0f"),void i();if(t.size>2097152){if(!H)return h.ZP.info("\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72M"),void i();W([t],{scale:.92},(function(e){return e[0].size>2097152?(h.ZP.info("\u6587\u4ef6\u8fc7\u5927\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),void i()):void n(e[0])}))}else n(t)}))}))},e.imageUploadChange=function(t){var n;if("done"===(null===(n=t.file)||void 0===n?void 0:n.status)){var i,s,a,o,r,c=t.file,l=c.type,d=c.uid,u="".concat(null===l||void 0===l?void 0:l.replace("image/","/upload/".concat(d,".")));if(e.props.updateQuesList&&"1001"===(null===(i=t.file.response)||void 0===i?void 0:i.code))e.props.updateQuesList({id:null!==(s=t.file.response)&&void 0!==s&&s.id?null===(a=t.file.response)||void 0===a?void 0:a.id:-1,index:null!==(o=t.file.response)&&void 0!==o&&o.index?null===(r=t.file.response)||void 0===r?void 0:r.index:-1,imgUrl:u})}},e.deleteSure=(0,s.Z)(d().mark((function t(){var n,i,s,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,i=n.focusMSG,s=n.exam_id,a=void 0===s?-1:s,t.next=3,(0,g.Km)({exam_id:a,id:null!==i&&void 0!==i&&i.id?null===i||void 0===i?void 0:i.id:-1});case 3:"1001"===t.sent.code&&e.setState({modalState:!1});case 5:case"end":return t.stop()}}),t)}))),e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.select,n=this.imageUploadBefore,a=this.imageUploadChange,o=this.deleteSure,r=this.handleVisibleChange,c=this.addStoreAndClose,l=this.state,u=l.imageUid,p=l.fileType,m=l.acceptFileType,x=l.modalState,y=l.addNewTypeStatus,_=l.newTypeName,w=l.popVisi,Z=this.props,S=Z.exam_id,b=void 0===S?-1:S,C=Z.login_id,L=void 0===C?-1:C,P=Z.index,E=Z.focusMSG,O=Z.setFocusMsg,F=Z.typeList,I=void 0===F?[]:F,U=Z.init,z=this.props.question_data||this.state.defaultData,B=(0,j.jsxs)("div",{className:"type-window",children:[I.length>0?(0,j.jsx)("ul",{children:I.map((function(e){return(0,j.jsxs)("li",{children:[(0,j.jsx)("span",{children:e.type_name}),(0,j.jsx)("span",{className:"add-type",onClick:function(){c(e.id)},children:"\u6dfb\u52a0"})]},e.id)}))}):"",y?(0,j.jsxs)("div",{className:"new-type-name",children:[(0,j.jsx)(k.Z,{style:{marginTop:5,height:26,fontSize:14,paddingLeft:7},showCount:!0,maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0",value:_,onChange:function(t){e.setState({newTypeName:t.currentTarget.value})}}),(0,j.jsxs)("div",{className:"new-type-btn",style:{textAlign:"right",cursor:"default"},children:[(0,j.jsx)("span",{className:"cancel",style:{marginRight:10,cursor:"pointer"},onClick:function(){e.setState({addNewTypeStatus:!1})},children:"\u53d6\u6d88"}),(0,j.jsx)("span",{className:"create",style:{cursor:"pointer",color:"#2672ff"},onClick:(0,s.Z)(d().mark((function t(){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.Xk)({type_name:_,creator_id:L});case 2:"1001"===(n=t.sent).code?(e.setState({addNewTypeStatus:!1}),e.props.init()):"1002"===n.code&&h.ZP.warning(n.msg);case 4:case"end":return t.stop()}}),t)}))),children:"\u521b\u5efa"})]})]}):(0,j.jsx)(j.Fragment,{}),(0,j.jsxs)("div",{className:"add-new-type",onClick:function(){e.setState({addNewTypeStatus:!0})},children:[(0,j.jsx)("span",{className:"iconfont icon-tianjia"}),(0,j.jsx)("span",{children:"\u65b0\u5efa\u5206\u7c7b"})]})]});return(0,j.jsxs)("div",{className:"ques-content",children:[(0,j.jsxs)("div",{className:"title",children:[(0,j.jsxs)("div",{className:"text-wrap",children:[(0,j.jsx)("input",{type:"text",className:"title-text",defaultValue:z.question_name,onFocus:t,onBlur:function(e){O((0,i.Z)((0,i.Z)({},E),{},{id:null!==E&&void 0!==E&&E.id?E.id:-1,option_list:null!==E&&void 0!==E&&E.option_list?E.option_list:[],question_name:e.currentTarget.value}))}}),(0,j.jsx)("div",{className:"option-tools",children:(0,j.jsx)(A.Z,{name:"file",data:{type:"question",index:-1,id:z.id,imageUid:u,imageType:p},maxCount:1,accept:m,action:"/api/examEdit/uploadImage",headers:{authorization:"authorization-text"},beforeUpload:n,onChange:a,children:(0,j.jsx)("span",{className:"iconfont icon-tupian",title:"\u63d2\u5165\u56fe\u7247"})})}),z.question_image?(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"img-container",style:{maxWidth:900,display:"inline-block"},children:[(0,j.jsx)("img",{style:{marginLeft:0,maxWidth:"100%"},src:"http://192.168.5.104:5008".concat(z.question_image),alt:""}),(0,j.jsx)(T.Z,{placement:"right",title:"\u786e\u5b9a\u5220\u9664\u8be5\u56fe\u7247\uff1f",onConfirm:(0,s.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.CM)({id:z.id?z.id:-1,index:-1});case 2:"1001"===e.sent.code&&U();case 4:case"end":return e.stop()}}),e)}))),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",children:(0,j.jsx)("span",{className:"iconfont icon-shanchu remove",title:"\u5220\u9664\u56fe\u7247"})})]})}):"",(0,j.jsxs)("div",{className:"operation",children:[z.id_in_store&&z.id_in_store>0?(0,j.jsx)("span",{className:"iconfont icon-favorite isInStore",title:"\u53d6\u6d88\u6536\u85cf",onClick:function(){var e=(0,s.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(z.id_in_store&&z.id_in_store>0)){e.next=6;break}return t.stopPropagation(),e.next=4,(0,g.rs)({id:z.id?z.id:-1,id_in_store:z.id_in_store});case 4:"1001"===e.sent.code&&(h.ZP.success("\u53d6\u6d88\u6536\u85cf"),U());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):(0,j.jsx)(v.Z,{placement:"bottom",content:B,trigger:"click",style:{height:500},visible:w,onVisibleChange:r,children:(0,j.jsx)("span",{className:"iconfont icon-favorite",title:"\u6536\u85cf\u81f3\u9898\u5e93"})}),(0,j.jsx)("span",{className:"iconfont icon-fuzhi1",title:"\u590d\u5236\u9898\u76ee",onClick:(0,s.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.dP)({exam_id:b,id:z.id?z.id:-1});case 2:"1001"===t.sent.code&&e.props.init((function(){e.props.scrollToBottom&&e.props.scrollToBottom()}));case 4:case"end":return t.stop()}}),t)})))}),(0,j.jsx)("span",{className:"iconfont icon-shanchu",title:"\u5220\u9664\u9898\u76ee",onClick:function(){e.setState({modalState:!0})}})]}),(0,j.jsx)(q.Z,{title:"\u5220\u9664\u9898\u76ee\u786e\u8ba4",centered:!0,visible:x,onOk:o,onCancel:function(){e.setState({modalState:!1})},afterClose:function(){e.props.setQuesFocus({index:-1}),e.props.init()},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,j.jsx)("p",{children:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f"})})]}),(0,j.jsxs)("span",{className:"must-fill normal",children:[(0,j.jsx)("span",{className:"red",children:"*"}),(0,j.jsx)("span",{className:"index",children:P+1})]})]}),z.option_list.map((function(e,n){return(0,j.jsxs)("div",{className:"option-item",children:[(0,j.jsxs)("div",{className:"container",children:[(0,j.jsx)("input",{type:"text",className:"showInp filling",value:e.option_name,onFocus:t,style:{width:800},onChange:function(e){E&&(E.option_list[n].option_name=e.currentTarget.value),O((0,i.Z)((0,i.Z)({},E),{},{id:null!==E&&void 0!==E&&E.id?E.id:-1,option_list:null!==E&&void 0!==E&&E.option_list?E.option_list:[]}))}}),(0,j.jsx)("div",{className:"option-tools",children:(0,j.jsx)("span",{className:"iconfont icon-jianshao",title:"\u79fb\u9664\u6b64\u9879",onClick:(0,s.Z)(d().mark((function e(){var t,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.id,s=void 0===t?-1:t,e.next=3,(0,g.Jk)({id:s,index:n});case 3:"1001"===e.sent.code&&((a=z.option_list).splice(n,1),O((0,i.Z)((0,i.Z)({},E),{},{id:s,option_list:a})),U());case 5:case"end":return e.stop()}}),e)})))})})]}),(0,j.jsx)("div",{className:"filling",children:(0,j.jsx)("input",{style:{width:800},type:"text",className:"inputOption",disabled:!0})})]},"".concat(e,"_").concat(P,"_").concat(n))})),(0,j.jsx)("div",{className:"addOption",children:(0,j.jsx)(f.Z,{style:{margin:"5px 0 0 50px"},type:"primary",ghost:!0,onClick:(0,s.Z)(d().mark((function e(){var t,n,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=z.id,n=void 0===t?-1:t,!(z.option_list.length>=10)){e.next=5;break}h.ZP.warning("\u6700\u591a\u6dfb\u52a010\u4e2a\u9009\u9879"),e.next=9;break;case 5:return e.next=7,(0,g.Zm)({id:n});case 7:"1001"===(s=e.sent).code&&(a=s.optionListRes.filter((function(e,t){return null!==e["option".concat(t+1)]})).map((function(e,t){var n;return n={},(0,N.Z)(n,"option_name",e["option".concat(t+1)]),(0,N.Z)(n,"option_image",e["option".concat(t+1,"_image")]),n})),O((0,i.Z)((0,i.Z)({},E),{},{id:n,option_list:a})),U());case 9:case"end":return e.stop()}}),e)}))),children:"\u6dfb\u52a0\u9009\u9879"})})]})}}]),n}(u.Component),X=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)($),J=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={defaultData:{id:-1,question_name:"\u8bf7\u7b80\u8981\u9610\u8ff0\u4f60\u7684\u89c2\u70b9",question_image:"",question_type:"",question_score:10,store_type:-1,answer:"",option_list:[]},imageUid:"",fileType:"",acceptFileType:".jpg,.jpeg,.gif,.png,.bmp,.webp",modalState:!1,addNewTypeStatus:!1,newTypeName:"",popVisi:!1},e.handleVisibleChange=function(t){e.setState({popVisi:t})},e.addStoreAndClose=function(){var t=(0,s.Z)(d().mark((function t(n){var i,s,a,o,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props,s=i.question_data,a=i.login_id,o=void 0===a?-1:a,r=i.init,t.next=3,(0,g.bN)({id:s.id||-1,creator_id:o,store_type_id:n});case 3:"1001"===t.sent.code&&(r(),h.ZP.success("\u6536\u85cf\u6210\u529f"),e.setState({popVisi:!1}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.select=function(e){e.target.select()},e.imageUploadBefore=function(t){return new Promise((function(n,i){e.setState({imageUid:t.uid,fileType:t.type},(function(){if(-1===e.state.acceptFileType.indexOf(t.type.slice(t.type.indexOf("/")+1)))return h.ZP.info("\u6682\u4e0d\u652f\u6301\u8be5\u6587\u4ef6\u683c\u5f0f"),void i();if(t.size>2097152){if(!H)return h.ZP.info("\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72M"),void i();W([t],{scale:.92},(function(e){return e[0].size>2097152?(h.ZP.info("\u6587\u4ef6\u8fc7\u5927\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),void i()):void n(e[0])}))}else n(t)}))}))},e.imageUploadChange=function(t){var n;if("done"===(null===(n=t.file)||void 0===n?void 0:n.status)){var i,s,a,o,r,c=t.file,l=c.type,d=c.uid,u="".concat(null===l||void 0===l?void 0:l.replace("image/","/upload/".concat(d,".")));if(e.props.updateQuesList&&"1001"===(null===(i=t.file.response)||void 0===i?void 0:i.code))e.props.updateQuesList({id:null!==(s=t.file.response)&&void 0!==s&&s.id?null===(a=t.file.response)||void 0===a?void 0:a.id:-1,index:null!==(o=t.file.response)&&void 0!==o&&o.index?null===(r=t.file.response)||void 0===r?void 0:r.index:-1,imgUrl:u})}},e.deleteSure=(0,s.Z)(d().mark((function t(){var n,i,s,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,i=n.focusMSG,s=n.exam_id,a=void 0===s?-1:s,t.next=3,(0,g.Km)({exam_id:a,id:null!==i&&void 0!==i&&i.id?null===i||void 0===i?void 0:i.id:-1});case 3:"1001"===t.sent.code&&e.setState({modalState:!1});case 5:case"end":return t.stop()}}),t)}))),e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.select,n=this.imageUploadBefore,a=this.imageUploadChange,o=this.deleteSure,r=this.handleVisibleChange,c=this.addStoreAndClose,l=this.state,u=l.imageUid,p=l.fileType,m=l.acceptFileType,x=l.modalState,f=l.addNewTypeStatus,y=l.newTypeName,_=l.popVisi,w=this.props,N=w.exam_id,Z=void 0===N?-1:N,S=w.login_id,T=void 0===S?-1:S,b=w.index,C=w.focusMSG,L=w.setFocusMsg,P=w.typeList,E=void 0===P?[]:P,O=w.init,F=this.props.question_data||this.state.defaultData,I=(0,j.jsxs)("div",{className:"type-window",children:[E.length>0?(0,j.jsx)("ul",{children:E.map((function(e){return(0,j.jsxs)("li",{children:[(0,j.jsx)("span",{children:e.type_name}),(0,j.jsx)("span",{className:"add-type",onClick:function(){c(e.id)},children:"\u6dfb\u52a0"})]},e.id)}))}):"",f?(0,j.jsxs)("div",{className:"new-type-name",children:[(0,j.jsx)(k.Z,{style:{marginTop:5,height:26,fontSize:14,paddingLeft:7},showCount:!0,maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0",value:y,onChange:function(t){e.setState({newTypeName:t.currentTarget.value})}}),(0,j.jsxs)("div",{className:"new-type-btn",style:{textAlign:"right",cursor:"default"},children:[(0,j.jsx)("span",{className:"cancel",style:{marginRight:10,cursor:"pointer"},onClick:function(){e.setState({addNewTypeStatus:!1})},children:"\u53d6\u6d88"}),(0,j.jsx)("span",{className:"create",style:{cursor:"pointer",color:"#2672ff"},onClick:(0,s.Z)(d().mark((function t(){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.Xk)({type_name:y,creator_id:T});case 2:"1001"===(n=t.sent).code?(e.setState({addNewTypeStatus:!1}),e.props.init()):"1002"===n.code&&h.ZP.warning(n.msg);case 4:case"end":return t.stop()}}),t)}))),children:"\u521b\u5efa"})]})]}):(0,j.jsx)(j.Fragment,{}),(0,j.jsxs)("div",{className:"add-new-type",onClick:function(){e.setState({addNewTypeStatus:!0})},children:[(0,j.jsx)("span",{className:"iconfont icon-tianjia"}),(0,j.jsx)("span",{children:"\u65b0\u5efa\u5206\u7c7b"})]})]});return(0,j.jsxs)("div",{className:"ques-content",children:[(0,j.jsxs)("div",{className:"title",children:[(0,j.jsxs)("div",{className:"text-wrap",children:[(0,j.jsx)("input",{type:"text",className:"title-text",defaultValue:F.question_name,onFocus:t,onBlur:function(e){L((0,i.Z)((0,i.Z)({},C),{},{id:null!==C&&void 0!==C&&C.id?C.id:-1,option_list:null!==C&&void 0!==C&&C.option_list?C.option_list:[],question_name:e.currentTarget.value}))}}),(0,j.jsx)("div",{className:"option-tools",children:(0,j.jsx)(A.Z,{name:"file",data:{type:"question",index:-1,id:F.id,imageUid:u,imageType:p},maxCount:1,accept:m,action:"/api/examEdit/uploadImage",headers:{authorization:"authorization-text"},beforeUpload:n,onChange:a,children:(0,j.jsx)("span",{className:"iconfont icon-tupian",title:"\u63d2\u5165\u56fe\u7247"})})}),F.question_image?(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"img-container",style:{maxWidth:900,display:"inline-block"},children:[(0,j.jsx)("img",{style:{marginLeft:0,maxWidth:"100%"},src:"http://192.168.5.104:5008".concat(F.question_image),alt:""}),(0,j.jsx)("span",{className:"iconfont icon-shanchu remove",title:"\u5220\u9664\u56fe\u7247"})]})}):"",(0,j.jsxs)("div",{className:"operation",children:[F.id_in_store&&F.id_in_store>0?(0,j.jsx)("span",{className:"iconfont icon-favorite isInStore",title:"\u53d6\u6d88\u6536\u85cf",onClick:function(){var e=(0,s.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(F.id_in_store&&F.id_in_store>0)){e.next=6;break}return t.stopPropagation(),e.next=4,(0,g.rs)({id:F.id?F.id:-1,id_in_store:F.id_in_store});case 4:"1001"===e.sent.code&&(h.ZP.success("\u53d6\u6d88\u6536\u85cf"),O());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):(0,j.jsx)(v.Z,{placement:"bottom",content:I,trigger:"click",style:{height:500},visible:_,onVisibleChange:r,children:(0,j.jsx)("span",{className:"iconfont icon-favorite",title:"\u6536\u85cf\u81f3\u9898\u5e93"})}),(0,j.jsx)("span",{className:"iconfont icon-fuzhi1",title:"\u590d\u5236\u9898\u76ee",onClick:(0,s.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.dP)({exam_id:Z,id:F.id?F.id:-1});case 2:"1001"===t.sent.code&&e.props.init((function(){e.props.scrollToBottom&&e.props.scrollToBottom()}));case 4:case"end":return t.stop()}}),t)})))}),(0,j.jsx)("span",{className:"iconfont icon-shanchu",title:"\u5220\u9664\u9898\u76ee",onClick:function(){e.setState({modalState:!0})}})]}),(0,j.jsx)(q.Z,{title:"\u5220\u9664\u9898\u76ee\u786e\u8ba4",centered:!0,visible:x,onOk:o,onCancel:function(){e.setState({modalState:!1})},afterClose:function(){e.props.setQuesFocus({index:-1}),e.props.init()},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,j.jsx)("p",{children:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f"})})]}),(0,j.jsxs)("span",{className:"must-fill normal",children:[(0,j.jsx)("span",{className:"red",children:"*"}),(0,j.jsx)("span",{className:"index",children:b+1})]})]}),(0,j.jsx)("textarea",{style:{border:"1px solid #d8d8d8",margin:"10px 0px 0px 50px",resize:"none"},name:"",id:"",cols:60,rows:5,disabled:!0})]})}}]),n}(u.Component),K=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)(J),Y=n(6847),ee=n(6998),te=n.n(ee),ne=n(2524),ie=n.n(ne),se=n(2426),ae=n.n(se),oe=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={issueState:!1,examLinkRandom:"",duration:null},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=(0,s.Z)(d().mark((function e(){var t,n,i,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.exam_id,i=t.setExamStatus,s=void 0===i?function(){}:i,e.next=3,(0,g.Zk)({exam_id:n||-1});case 3:"1001"===(a=e.sent).code&&1===a.isStart?(s({examStatus:!0}),this.setState({issueState:!0,examLinkRandom:a.examLink})):s({examStatus:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.issueState,i=t.examLinkRandom,a=this.state.duration,o=this.props,r=o.exam_id,c=o.examHostLink,l=o.setExamStatus,u=void 0===l?function(){}:l;return(0,j.jsx)("div",{className:"exam-content",onClick:function(e){e.stopPropagation()},children:(0,j.jsx)("div",{className:"issue-box",children:n?(0,j.jsx)("div",{className:"issued",style:{margin:"0 auto",paddingTop:100},children:(0,j.jsxs)("div",{className:"container",children:[(0,j.jsxs)("div",{className:"title",children:[(0,j.jsx)("span",{className:"title-text",children:"\u9879\u76ee\u5206\u4eab"}),(0,j.jsx)("span",{className:"describe",children:"\uff08\u9879\u76ee\u53d1\u5e03\u540e\uff0c\u94fe\u63a5\u4e0e\u4e8c\u7ef4\u7801\u59cb\u7ec8\u4e0d\u53d8\uff09"})]}),(0,j.jsxs)("div",{className:"issue-share",children:[(0,j.jsxs)("div",{className:"link",children:[(0,j.jsx)("h3",{children:"\u5206\u4eab\u94fe\u63a5"}),(0,j.jsxs)("div",{className:"link-text",children:[(0,j.jsx)("input",{type:"text",readOnly:!0,disabled:!0,value:"".concat(c,"/").concat(i)}),(0,j.jsx)(f.Z,{type:"primary",style:{width:80,height:40,borderBottomColor:"#2672ff",borderRadius:"0 3px 3px 0",fontSize:16},onClick:function(){h.ZP.success({content:"\u5df2\u590d\u5236\u5230\u526a\u5207\u677f",duration:.8,style:{position:"relative",top:50}}),te()("".concat(c,"/").concat(i))},children:"\u590d\u5236"}),(0,j.jsx)(f.Z,{style:{width:80,height:40,borderRadius:"3px",marginLeft:10,borderColor:"#2672ff",color:"#2672ff",fontSize:16},onClick:function(){window.open("".concat(c,"/").concat(i))},children:"\u6253\u5f00"})]})]}),(0,j.jsxs)("div",{className:"code",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,j.jsx)("h3",{style:{marginBottom:10},children:"\u626b\u7801\u5206\u4eab\u7b54\u9898\u9875"}),(0,j.jsx)(ie(),{value:"".concat(c,"/").concat(i)})]})]})]})}):(0,j.jsxs)("div",{className:"not-issue",style:{margin:"0 auto",paddingTop:240,textAlign:"center"},children:[(0,j.jsx)("div",{className:"title",children:"\u5f00\u542f\u53d1\u5e03\u540e\uff0c\u5373\u53ef\u5206\u4eab\u8003\u8bd5"}),(0,j.jsx)("div",{children:(0,j.jsxs)("div",{style:{display:"inline-block"},children:[(0,j.jsx)("span",{children:"\u8003\u8bd5\u65f6\u957f\uff1a"}),(0,j.jsx)(Y.Z,{placeholder:"\u8bbe\u7f6e\u8003\u8bd5\u65f6\u957f",value:a,minuteStep:15,secondStep:10,onChange:function(t){e.setState({duration:ae()("".concat(null===t||void 0===t?void 0:t.hours(),":").concat(null===t||void 0===t?void 0:t.minutes(),":").concat(null===t||void 0===t?void 0:t.seconds()),"HH:mm:ss")})}})]})}),(0,j.jsx)(f.Z,{type:"primary",size:"large",style:{width:160,height:40,marginTop:20},onClick:(0,s.Z)(d().mark((function t(){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=3;break}return h.ZP.warning({content:"\u8bf7\u8bbe\u7f6e\u8003\u8bd5\u65f6\u957f",duration:.7}),t.abrupt("return");case 3:return t.next=5,(0,g.UP)({exam_id:r||-1,duration:a});case 5:"1001"===(n=t.sent).code?(u({examStatus:!0}),e.setState({issueState:!0,examLinkRandom:"".concat(n.examLink)})):h.ZP.error("\u7f51\u7edc\u51fa\u9519");case 7:case"end":return t.stop()}}),t)}))),children:"\u5f00\u59cb\u53d1\u5e03"})]})})})}}]),n}(u.Component),re=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)(oe),ce=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,j.jsx)("div",{className:"exam-content",children:"\u6570\u636e\u62a5\u8868"})}}]),n}(u.Component),le=(0,p.$j)((function(e){return e}))(ce),de=function(e){switch(e){case"1":default:return"\u5355\u9009\u9898";case"2":return"\u591a\u9009\u9898";case"3":return"\u5224\u65ad\u9898";case"4":return"\u591a\u9879\u586b\u7a7a";case"5":return"\u7b80\u7b54\u9898"}},ue=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={examTitle:"",welcomeHolder:"",focusTemp:-1},e.init=function(){var t=(0,s.Z)(d().mark((function t(n){var i,s,a,o,r,c,l,u,p,m,x;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props,s=i.current,a=i.setOriginList,o=i.setStepStatus,r=i.exam_id,c=i.login_id,l=void 0===c?-1:c,u=i.setTypeList,p=i.setQuestionStore,t.next=3,(0,g.OM)({exam_id:r});case 3:return(m=t.sent)&&m.examItem&&m.examItem.id&&e.setState({examTitle:m.examItem.exam_name||"\u8003\u8bd5\u6807\u9898",welcomeHolder:m.examItem.welcome||"\u70b9\u51fb\u7f16\u8f91\u6b22\u8fce\u8bed"}),t.next=7,(0,g.h8)({creator_id:l});case 7:"1001"===(x=t.sent).code&&(p({question_store:x.question_store}),u({typeList:x.store_type})),a({questionList:m.question_list}),o({index:s}),n&&n();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getQuesType=function(t,n,i){switch(n){case"1":case"2":case"3":default:return(0,j.jsx)(G,{index:t,type:n,question_data:i,init:e.init});case"4":return(0,j.jsx)(X,{index:t,type:n,question_data:i,init:e.init});case"5":return(0,j.jsx)(K,{index:t,type:n,question_data:i,init:e.init})}},e.getTypeName=de,e}return(0,o.Z)(n,[{key:"totalScore",get:function(){return this.props.questionList.reduce((function(e,t){return e+t.question_score}),0)}},{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){var e=this,t=m.Z.Step,n=this.props,a=n.exam_id,o=n.steps,r=n.setStepStatus,c=n.current,l=n.setQuesFocus,u=n.question_focus,p=n.setQuesType,y=n.focusMSG,_=n.setFocusMsg,w=n.questionList,N=n.examStatus,Z=this.state,S=Z.examTitle,k=Z.welcomeHolder,q=Z.focusTemp,T=this.getQuesType,b=this.getTypeName,C=this.totalScore;return(0,j.jsxs)("div",{className:"exam-page",onClick:(0,s.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.WU)((0,i.Z)((0,i.Z)({},y),{},{exam_id:a}));case 2:"1001"===t.sent.code&&e.init(),l({index:-1});case 5:case"end":return t.stop()}}),t)}))),children:[(0,j.jsxs)("div",{className:"exam-header",onClick:function(e){e.stopPropagation()},children:[(0,j.jsx)(x.Z,{placement:"bottomLeft",title:"\u8fd4\u56de\u9879\u76ee\u5217\u8868",arrowPointAtCenter:!0,children:(0,j.jsx)("span",{className:"backToList iconfont icon-houtui1",onClick:function(){var t=(0,s.Z)(d().mark((function t(n){var s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),0===c&&y&&!(y.id<0)){t.next=4;break}return e.props.history.push("/layout/home/list"),t.abrupt("return");case 4:return t.next=6,(0,g.WU)((0,i.Z)((0,i.Z)({},y),{},{exam_id:a}));case 6:s=t.sent,l({index:-1}),"1001"===s.code&&e.init((function(){e.props.history.push("/layout/home/list")}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}),(0,j.jsx)("div",{className:"exam-title-msg",children:S}),(0,j.jsx)("div",{className:"exam-step",style:{marginLeft:130},children:(0,j.jsx)(m.Z,{type:"navigation",current:c,className:"site-navigation-steps",children:o.map((function(n,i){return(0,j.jsx)(t,{status:n.status,title:n.title,style:{cursor:"pointer"},onClick:function(){e.props.examHostLink&&0===i&&N?h.ZP.warning({content:"\u65e0\u6cd5\u4fee\u6539\u6536\u96c6\u4e2d\u7684\u9879\u76ee,\u8bf7\u505c\u6b62\u53d1\u5e03",duration:.7,style:{position:"relative",top:50}}):r({index:i})}},n.current)}))})}),(0,j.jsxs)("div",{className:"save-issue",style:{paddingLeft:"".concat(0!==c?"184.38px":"0")},children:[0===c?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f.Z,{style:{borderColor:"#2672ff",color:"#2672ff",marginRight:10},children:"\u4fdd\u5b58"}),(0,j.jsx)(f.Z,{type:"primary",style:{marginRight:10},onClick:function(e){e.stopPropagation(),r({index:1})},children:"\u53d1\u5e03\u5e76\u5206\u4eab"})]}):"",(0,j.jsx)(v.Z,{placement:"bottomRight",content:(0,j.jsx)("span",{className:"home-logout",onClick:function(){e.props.history.push("/login")},children:"\u9000\u51fa\u767b\u5f55"}),trigger:"hover",children:(0,j.jsx)("span",{className:"iconfont icon-wode2"})})]})]}),0===c?(0,j.jsxs)("div",{className:"exam-content",children:[(0,j.jsx)("div",{className:"left-nav",children:(0,j.jsx)(F,{init:this.init})}),(0,j.jsx)("div",{className:"exam-body",children:(0,j.jsxs)("div",{className:"inner",children:[(0,j.jsxs)("div",{className:"exam-titleAndWelcome",children:[(0,j.jsx)("div",{className:"title-wrap",children:(0,j.jsx)("div",{className:"title-text",contentEditable:"true",dangerouslySetInnerHTML:{__html:S},onBlur:function(){var t=(0,s.Z)(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.QS)({exam_id:a,examTitle:n.currentTarget.innerText,welcomeHolder:k});case 2:"1001"===t.sent.code&&e.init();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}),(0,j.jsx)("div",{className:"welcome-wrap",children:(0,j.jsx)("div",{className:"title-text",contentEditable:"true",dangerouslySetInnerHTML:{__html:k},onBlur:function(){var e=(0,s.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.QS)({exam_id:a,examTitle:S,welcomeHolder:t.currentTarget.innerText});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),(0,j.jsxs)("div",{className:"total-score",children:[(0,j.jsx)("h3",{children:"\u603b\u5206"}),(0,j.jsx)("p",{children:C})]})]}),(0,j.jsxs)("div",{className:"msg-question-list",children:[(0,j.jsx)("div",{className:"question-item",children:(0,j.jsxs)("div",{className:"ques-content",children:[(0,j.jsxs)("div",{className:"title",children:["\u59d3\u540d",(0,j.jsx)("span",{className:"must-fill",children:(0,j.jsx)("span",{className:"red",children:"*"})})]}),(0,j.jsx)("input",{type:"text",className:"showInp",disabled:!0})]})}),(0,j.jsx)("div",{className:"question-item",children:(0,j.jsxs)("div",{className:"ques-content",children:[(0,j.jsxs)("div",{className:"title",children:["\u624b\u673a",(0,j.jsx)("span",{className:"must-fill",children:(0,j.jsx)("span",{className:"red",children:"*"})})]}),(0,j.jsx)("input",{type:"text",className:"showInp",disabled:!0})]})}),(0,j.jsx)("div",{className:"question-item",children:(0,j.jsxs)("div",{className:"ques-content",children:[(0,j.jsxs)("div",{className:"title",children:["\u73ed\u7ea7",(0,j.jsx)("span",{className:"must-fill",children:(0,j.jsx)("span",{className:"red",children:"*"})})]}),(0,j.jsx)("input",{type:"text",className:"showInp",disabled:!0})]})})]}),(0,j.jsx)("div",{className:"normal-question-list",children:w.map((function(t,n){return(0,j.jsx)("div",{className:"question-item".concat(u===t.id?" question_focus":""),onClick:function(){var n=(0,s.Z)(d().mark((function n(s){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.stopPropagation(),q===t.id||-1===q){n.next=9;break}return n.next=4,(0,g.WU)((0,i.Z)((0,i.Z)({},y),{},{exam_id:a}));case 4:"1001"===n.sent.code&&e.init(),_((0,i.Z)((0,i.Z)({},t),{},{id:t.id?t.id:-1})),n.next=10;break;case 9:-1===q&&_((0,i.Z)((0,i.Z)({},t),{},{id:t.id?t.id:-1}));case 10:l({index:t.id?t.id:-1}),p({ques_type:b(t.question_type)}),e.setState({focusTemp:t.id?t.id:-1});case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),children:T(n,t.question_type,t)},t.id)}))})]})}),(0,j.jsx)("div",{className:"right-nav",onClick:function(e){e.stopPropagation()},children:(0,j.jsx)(M,{init:this.init})})]}):1===c?(0,j.jsx)(re,{}):2===c?(0,j.jsx)(le,{}):(0,j.jsx)(j.Fragment,{})]})}}]),n}(u.Component),pe=(0,p.$j)((function(e){return e.examEdit}),y.Z.examEdit)(ue)}}]);
//# sourceMappingURL=123.0bbd9ba1.chunk.js.map